version: "3.9"

services:
  calendar-core-java:
    build:
      context: ./services/calendar-core-java
    container_name: calendar-core-java
    environment:
      - SERVER_PORT=${JAVA_PORT:-8080}
      - SPRING_PROFILES_ACTIVE=${PROFILE:-dev}
    ports:
      - "${JAVA_PORT:-8080}:8080"

  telegram-agent-py:
    build:
      context: ./services/telegram-agent-py
    container_name: telegram-agent-py
    environment:
      - PORT=${PYTHON_PORT:-8000}
      - CALENDAR_CORE_BASE_URL=${CALENDAR_CORE_BASE_URL:-http://calendar-core-java:8080}
      - DEFAULT_TIMEZONE=${DEFAULT_TIMEZONE:-America/Sao_Paulo}
    depends_on:
      - calendar-core-java
    ports:
      - "${PYTHON_PORT:-8000}:8000"
